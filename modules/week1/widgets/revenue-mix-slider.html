<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revenue Mix Slider - Build Your Revenue Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Geist:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-neutral-50: #fafafa;
            --color-neutral-100: #f5f5f5;
            --color-neutral-200: #e5e5e5;
            --color-neutral-300: #d4d4d4;
            --color-neutral-400: #a3a3a3;
            --color-neutral-500: #737373;
            --color-neutral-600: #525252;
            --color-neutral-700: #404040;
            --color-neutral-800: #262626;
            --color-neutral-900: #171717;
            --color-error: #ef4444;
            --color-success: #c0d1cd;
            --color-warning: #f0ede0;
            --color-info: #bfe5e7;
            --color-purple: #d5cae0;
            --color-green: #c0d1cd;
            --color-turquoise: #bfe5e7;
            --color-sand: #f0ede0;
            --font-family-primary: 'Geist', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --border-radius: 8px;
            --border-radius-sm: 4px;
        }

        *:focus {
            outline: 2px solid #3182ce;
            outline-offset: 2px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-primary);
            background: white;
            color: var(--color-neutral-800);
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            border: 1px solid var(--color-neutral-200);
        }

        h1 {
            color: var(--color-neutral-900);
            font-size: 1.8rem;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: var(--color-neutral-500);
            margin-bottom: 30px;
            font-size: 0.95rem;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .sliders-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .slider-group {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--stream-color);
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .stream-name {
            font-weight: 600;
            color: var(--stream-color);
            font-size: 0.95rem;
        }

        .stream-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--color-neutral-800);
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--color-neutral-300);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--stream-color);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--stream-color);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        /* Stream-specific colors */
        .media { --stream-color: var(--color-neutral-500); }
        .ticketing { --stream-color: var(--color-neutral-500); }
        .sponsorship { --stream-color: var(--color-neutral-500); }
        .merchandising { --stream-color: var(--color-neutral-500); }
        .betting { --stream-color: var(--color-neutral-500); }

        .visualization {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .pie-chart {
            width: 100%;
            aspect-ratio: 1;
            background: white;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
        }

        .metrics {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid var(--color-neutral-200);
        }

        .metric-row:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: var(--color-neutral-500);
            font-size: 0.9rem;
        }

        .metric-value {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .metric-value.good {
            color: var(--color-neutral-500);
        }

        .metric-value.medium {
            color: var(--color-neutral-500);
        }

        .metric-value.bad {
            color: var(--color-neutral-500);
        }

        .total-bar {
            background: var(--color-neutral-200);
            height: 40px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            display: flex;
        }

        .total-bar-fill {
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .total-bar-fill.complete {
            background: var(--color-neutral-500);
        }

        .total-bar-fill.incomplete {
            background: var(--color-neutral-400);
        }

        .insights {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .insights h3 {
            color: var(--color-neutral-900);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .insight-item {
            padding: 10px;
            background: var(--color-neutral-50);
            border-radius: 4px;
            margin-bottom: 10px;
            border-left: 3px solid var(--color-neutral-500);
        }

        .insight-item:last-child {
            margin-bottom: 0;
        }

        .reset-btn {
            background: var(--color-neutral-900);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
            margin-top: 20px;
            transition: background 0.2s;
        }

        .reset-btn:hover {
            background: var(--color-neutral-700);
        }


        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Revenue Mix Slider</h1>
        <p class="subtitle">Build your revenue portfolio and see how it performs</p>

        <div class="total-bar" aria-label="Total revenue allocation" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
            <div id="totalBarFill" class="total-bar-fill incomplete">0%</div>
        </div>

        <div class="grid">
            <!-- Sliders Section -->
            <div class="sliders-section">
                <div class="slider-group media">
                    <div class="slider-header">
                        <span class="stream-name">Media Rights</span>
                        <span class="stream-value"><span id="mediaValue">40</span>%</span>
                    </div>
                    <label for="mediaSlider" class="sr-only">Media Rights percentage</label>
                    <input type="range" id="mediaSlider" min="0" max="100" value="40" step="1"
                           aria-label="Media Rights allocation slider">
                </div>

                <div class="slider-group ticketing">
                    <div class="slider-header">
                        <span class="stream-name">Ticketing & Live Events</span>
                        <span class="stream-value"><span id="ticketingValue">25</span>%</span>
                    </div>
                    <label for="ticketingSlider" class="sr-only">Ticketing percentage</label>
                    <input type="range" id="ticketingSlider" min="0" max="100" value="25" step="1"
                           aria-label="Ticketing allocation slider">
                </div>

                <div class="slider-group sponsorship">
                    <div class="slider-header">
                        <span class="stream-name">Sponsorship</span>
                        <span class="stream-value"><span id="sponsorshipValue">20</span>%</span>
                    </div>
                    <label for="sponsorshipSlider" class="sr-only">Sponsorship percentage</label>
                    <input type="range" id="sponsorshipSlider" min="0" max="100" value="20" step="1"
                           aria-label="Sponsorship allocation slider">
                </div>

                <div class="slider-group merchandising">
                    <div class="slider-header">
                        <span class="stream-name">Merchandising</span>
                        <span class="stream-value"><span id="merchandisingValue">10</span>%</span>
                    </div>
                    <label for="merchandisingSlider" class="sr-only">Merchandising percentage</label>
                    <input type="range" id="merchandisingSlider" min="0" max="100" value="10" step="1"
                           aria-label="Merchandising allocation slider">
                </div>

                <div class="slider-group betting">
                    <div class="slider-header">
                        <span class="stream-name">Betting & Gaming</span>
                        <span class="stream-value"><span id="bettingValue">5</span>%</span>
                    </div>
                    <label for="bettingSlider" class="sr-only">Betting percentage</label>
                    <input type="range" id="bettingSlider" min="0" max="100" value="5" step="1"
                           aria-label="Betting allocation slider">
                </div>
            </div>

            <!-- Visualization Section -->
            <div class="visualization">
                <div class="metrics">
                    <div class="metric-row">
                        <span class="metric-label">Risk Score</span>
                        <span id="riskScore" class="metric-value medium">Medium</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Growth Potential</span>
                        <span id="growthPotential" class="metric-value good">Moderate</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Stability Rating</span>
                        <span id="stabilityRating" class="metric-value good">Stable</span>
                    </div>
                    <div class="metric-row">
                        <span class="metric-label">Portfolio Type</span>
                        <span id="portfolioType" class="metric-value">Balanced</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="insights">
            <h3>Insights</h3>
            <div id="insightsContainer"></div>
        </div>

        <button class="reset-btn" onclick="resetToDefaults()">Reset to Typical League Mix</button>
    </div>

    <script>
        const sliders = {
            media: document.getElementById('mediaSlider'),
            ticketing: document.getElementById('ticketingSlider'),
            sponsorship: document.getElementById('sponsorshipSlider'),
            merchandising: document.getElementById('merchandisingSlider'),
            betting: document.getElementById('bettingSlider')
        };

        const values = {
            media: document.getElementById('mediaValue'),
            ticketing: document.getElementById('ticketingValue'),
            sponsorship: document.getElementById('sponsorshipValue'),
            merchandising: document.getElementById('merchandisingValue'),
            betting: document.getElementById('bettingValue')
        };

        // Add event listeners to all sliders
        Object.keys(sliders).forEach(key => {
            sliders[key].addEventListener('input', (e) => {
                enforceMaxTotal(key);
                updateDisplay();
            });
        });

        function getValues() {
            return {
                media: parseInt(sliders.media.value),
                ticketing: parseInt(sliders.ticketing.value),
                sponsorship: parseInt(sliders.sponsorship.value),
                merchandising: parseInt(sliders.merchandising.value),
                betting: parseInt(sliders.betting.value)
            };
        }

        function enforceMaxTotal(changedKey) {
            // Calculate total of all OTHER sliders (not the one being changed)
            const otherKeys = Object.keys(sliders).filter(k => k !== changedKey);
            const otherTotal = otherKeys.reduce((sum, key) => sum + parseInt(sliders[key].value), 0);

            // Cap the current slider so total doesn't exceed 100
            const maxAllowed = 100 - otherTotal;
            const currentValue = parseInt(sliders[changedKey].value);

            if (currentValue > maxAllowed) {
                sliders[changedKey].value = Math.max(0, maxAllowed);
            }
        }

        function updateDisplay() {
            const current = getValues();
            const total = current.media + current.ticketing + current.sponsorship +
                         current.merchandising + current.betting;

            // Update value displays
            values.media.textContent = current.media;
            values.ticketing.textContent = current.ticketing;
            values.sponsorship.textContent = current.sponsorship;
            values.merchandising.textContent = current.merchandising;
            values.betting.textContent = current.betting;

            // Update total bar
            const totalBar = document.getElementById('totalBarFill');
            totalBar.style.width = Math.min(total, 100) + '%';
            totalBar.textContent = total + '%';
            totalBar.className = 'total-bar-fill ' + (total === 100 ? 'complete' : 'incomplete');
            totalBar.parentElement.setAttribute('aria-valuenow', total);

            if (total === 100) {
                calculateMetrics(current);
            } else {
                clearMetrics();
            }
        }

        function calculateMetrics(current) {
            // Risk calculation (betting/growth = high risk, media = low risk)
            const riskScore = (current.betting * 2 + current.media * 0.5 + current.sponsorship * 1.5 +
                              current.ticketing * 1 + current.merchandising * 0.8) / 100;

            let riskText, riskClass;
            if (riskScore < 1) {
                riskText = 'Low'; riskClass = 'good';
            } else if (riskScore < 1.5) {
                riskText = 'Medium'; riskClass = 'medium';
            } else {
                riskText = 'High'; riskClass = 'bad';
            }

            // Growth potential (betting/tech = high growth, ticketing = low growth)
            const growthScore = (current.betting * 2 + current.media * 1.2 + current.sponsorship * 1.3 +
                                current.ticketing * 0.5 + current.merchandising * 0.8) / 100;

            let growthText, growthClass;
            if (growthScore < 0.9) {
                growthText = 'Low'; growthClass = 'bad';
            } else if (growthScore < 1.3) {
                growthText = 'Moderate'; growthClass = 'medium';
            } else {
                growthText = 'High'; growthClass = 'good';
            }

            // Stability (media/ticketing = stable, betting = unstable)
            const stabilityScore = (current.media * 2 + current.ticketing * 1.8 + current.sponsorship * 1.2 +
                                   current.merchandising * 1.5 + current.betting * 0.3) / 100;

            let stabilityText, stabilityClass;
            if (stabilityScore < 1) {
                stabilityText = 'Unstable'; stabilityClass = 'bad';
            } else if (stabilityScore < 1.5) {
                stabilityText = 'Moderate'; stabilityClass = 'medium';
            } else {
                stabilityText = 'Stable'; stabilityClass = 'good';
            }

            // Portfolio type
            let portfolioType = 'Balanced';
            if (current.media > 60) portfolioType = 'Media-Dependent';
            else if (current.betting > 20) portfolioType = 'High-Growth Aggressive';
            else if (current.ticketing > 40) portfolioType = 'Traditional/Conservative';
            else if (current.sponsorship + current.merchandising > 40) portfolioType = 'Brand-Driven';

            // Update display
            const riskEl = document.getElementById('riskScore');
            riskEl.textContent = riskText;
            riskEl.className = 'metric-value ' + riskClass;

            const growthEl = document.getElementById('growthPotential');
            growthEl.textContent = growthText;
            growthEl.className = 'metric-value ' + growthClass;

            const stabilityEl = document.getElementById('stabilityRating');
            stabilityEl.textContent = stabilityText;
            stabilityEl.className = 'metric-value ' + stabilityClass;

            document.getElementById('portfolioType').textContent = portfolioType;

            generateInsights(current, portfolioType, riskText, growthText, stabilityText);
        }

        function generateInsights(current, portfolioType, riskText, growthText, stabilityText) {
            const insights = [];

            // Calculate actual scores for consistency (same formulas as calculateMetrics)
            const riskScore = (current.betting * 2 + current.media * 0.5 + current.sponsorship * 1.5 +
                              current.ticketing * 1 + current.merchandising * 0.8) / 100;
            const growthScore = (current.betting * 2 + current.media * 1.2 + current.sponsorship * 1.3 +
                                current.ticketing * 0.5 + current.merchandising * 0.8) / 100;
            const stabilityScore = (current.media * 2 + current.ticketing * 1.8 + current.sponsorship * 1.2 +
                                   current.merchandising * 1.5 + current.betting * 0.3) / 100;

            // Check for truly balanced portfolio (all streams in reasonable ranges)
            const isTypicalMix = current.media >= 35 && current.media <= 55 &&
                                 current.ticketing >= 15 && current.ticketing <= 30 &&
                                 current.sponsorship >= 10 && current.sponsorship <= 25 &&
                                 current.merchandising >= 5 && current.merchandising <= 15 &&
                                 current.betting >= 0 && current.betting <= 10;

            // Metric-aligned insights
            if (riskText === 'High') {
                if (current.betting > 15) {
                    insights.push('High risk: Betting-heavy portfolio carries significant regulatory and market uncertainty.');
                } else if (current.sponsorship > 35) {
                    insights.push('High risk: Heavy sponsorship dependence is vulnerable to economic downturns and brand crises.');
                } else {
                    insights.push('High risk: This allocation exposes you to significant market volatility.');
                }
            } else if (riskText === 'Low') {
                insights.push('Low risk: This conservative mix prioritizes stability over aggressive growth.');
            }

            if (growthText === 'Low') {
                if (current.ticketing > 35) {
                    insights.push('Limited growth: Ticketing is capacity-constrained—stadiums can\'t expand indefinitely.');
                } else if (current.merchandising > 25) {
                    insights.push('Limited growth: Merchandising alone rarely drives major revenue expansion.');
                } else if (current.betting === 0 && current.media < 40) {
                    insights.push('Limited growth: Missing high-growth streams (betting, strong media) constrains upside potential.');
                } else {
                    insights.push('Limited growth: This mix lacks the high-growth drivers needed for significant revenue expansion.');
                }
            } else if (growthText === 'High') {
                insights.push('High growth potential: This mix positions you for revenue expansion, but monitor the associated risks.');
            }

            if (stabilityText === 'Unstable') {
                insights.push('Warning: Low stability—revenue could swing dramatically with market changes or regulatory shifts.');
            } else if (stabilityText === 'Stable' && growthText === 'Low') {
                insights.push('Trade-off: High stability often comes at the cost of growth potential.');
            }

            // Specific allocation warnings
            if (current.media > 60) {
                insights.push('Media concentration risk: Heavy dependence on media rights creates vulnerability to cord-cutting and streaming disruption.');
            }
            if (current.media < 25 && current.media > 0) {
                insights.push('Low media share may limit leverage in revenue-sharing negotiations with the league.');
            }
            if (current.ticketing > 40) {
                insights.push('Ticketing ceiling: Physical capacity limits make this difficult to scale beyond current levels.');
            }
            if (current.betting > 20) {
                insights.push('Regulatory exposure: Betting regulations vary by jurisdiction and could change quickly.');
            }
            if (current.merchandising > 30) {
                insights.push('Merchandising is performance-dependent—revenue will fluctuate with team success and star power.');
            }

            // Portfolio type insight
            if (isTypicalMix) {
                insights.push('Balanced portfolio: This mix resembles a typical major league allocation—diversified and proven.');
            } else if (portfolioType === 'Media-Dependent') {
                insights.push('Media-dependent model: Common in top leagues, but requires strong broadcast partnerships.');
            } else if (portfolioType === 'Traditional/Conservative') {
                insights.push('Traditional model: Prioritizes game-day revenue over emerging streams.');
            } else if (portfolioType === 'High-Growth Aggressive') {
                insights.push('Aggressive growth model: Betting on emerging revenue streams for future upside.');
            } else if (portfolioType === 'Brand-Driven') {
                insights.push('Brand-driven model: Success depends heavily on team performance and market presence.');
            }

            // Missing streams warning
            const zeroStreams = [];
            if (current.media === 0) zeroStreams.push('media rights');
            if (current.ticketing === 0) zeroStreams.push('ticketing');
            if (current.sponsorship === 0) zeroStreams.push('sponsorship');
            if (zeroStreams.length >= 2) {
                insights.push(`Concentration warning: Eliminating ${zeroStreams.join(' and ')} creates heavy dependence on remaining streams.`);
            }

            const container = document.getElementById('insightsContainer');
            if (insights.length === 0) {
                container.innerHTML = '<div class="insight-item">Adjust your sliders to see strategic insights about your revenue mix.</div>';
            } else {
                container.innerHTML = insights.map(insight =>
                    `<div class="insight-item">${insight}</div>`
                ).join('');
            }
        }

        function clearMetrics() {
            document.getElementById('riskScore').textContent = '—';
            document.getElementById('growthPotential').textContent = '—';
            document.getElementById('stabilityRating').textContent = '—';
            document.getElementById('portfolioType').textContent = '—';
            document.getElementById('insightsContainer').innerHTML =
                '<div class="insight-item">Total must equal 100% to calculate metrics</div>';
        }

        function resetToDefaults() {
            sliders.media.value = 40;
            sliders.ticketing.value = 25;
            sliders.sponsorship.value = 20;
            sliders.merchandising.value = 10;
            sliders.betting.value = 5;
            updateDisplay();
        }

        // Initialize
        updateDisplay();
    </script>
</body>
</html>
